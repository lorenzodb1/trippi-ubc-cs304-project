{% extends 'templates/app.twig' %}

{% block content %}

    <div class="row">
        <div class="col-md-4">
            {% for index, user in users %}
                {% include 'profile/partials/profile_item.twig' with {user: user} %}
            {% endfor %}

            <form action="{{ path_for('trip.createTrip')}}" method="post">

                <h3>Create a Trip</h3>

                <div class="form-group">

                    <label for="email">Your Email</label>

                    <input type="email" name="email" id="email" class="form-control">

                </div>

                <div class="form-group">

                    <label for="tripName">Trip Name</label>

                    <input type="text" name="tripName" id="tripName" class="form-control">

                </div>

                <div class="form-group">

                    <label for="startDate">Start Date (YYYY-MM-DD)</label>

                    <input type="text" name="startDate" id="startDate" class="form-control">

                </div>

                <div class="form-group">

                    <label for="endDate">End Date (YYYY-MM-DD)</label>

                    <input type="text" name="endDate" id="endDate" class="form-control">

                </div>


                <button type="submit" class="btn btn-default">Create</button>


            </form>

        </div>

        <div class="col-md-8">

            <div class="col-md-4"></div>
            <div class="col-md-4"></div>
            <div class="col-md-4">
                <h4><a href = "{{ path_for('trip.getAllTrips', {email: userEmail}) }}" method="get"> View all Trippi Trips </a></h4>
            </div>

            <h3>Your Planned Trips</h3>
            {% if plannedTrips %}
                <div class="well">
                    <table class ="table">
                        <thead>
                        <tr>
                            <th>Trip Id</th>
                            <th>Trip Name</th>
                            <th>From</th>
                            <th>To</th>
                            <th></th>

                        </tr>
                        </thead>
                        <tbody>
                        {% for index, trip in plannedTrips %}
                            <tr>
                                <td><a href="{{ path_for('trip.getTrip', {tripId: trip.id, email: userEmail})}}" method="get">{{ trip.id }}</a></td>
                                <td>{{ trip.tripName }}</td>
                                <td>{{ trip.from }}</td>
                                <td>{{ trip.to }}</td>
                                <td><a href="{{ path_for('trip.deleteTrip', {tripId: trip.id, email: userEmail})}}" method="get">Delete</a></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>

             {% else %}
                <p> You currently have no planned trips </p>

             {% endif %}


            <h3>Your Joined Trips</h3>
            {% if joinedTrips %}
                <div class="well">
                    <table class ="table">
                        <thead>
                        <tr>
                            <th>Trip Id</th>
                            <th>Trip Name</th>
                            <th>From</th>
                            <th>To</th>
                            <th></th>


                        </tr>
                        </thead>
                        <tbody>

                        {% for index, trip in joinedTrips %}
                            <tr>
                                <td><a href="{{ path_for('trip.getUneditedTrip', {tripId: trip.id, email: userEmail})}}" method="get">{{ trip.id }}</a></td>
                                <td>{{ trip.tripName }}</td>
                                <td>{{ trip.from }}</td>
                                <td>{{ trip.to }}</td>
                                <td><a href="{{ path_for('trip.removeTrip', {tripId: trip.id, email: userEmail})}}" method="get">Remove</a></td>
                            </tr>
                        {% endfor %}

                        </tbody>
                    </table>
                </div>

            {% else %}
                <p> You currently have no joined trips </p>

            {% endif %}


            <h3>Your ratings from other users</h3>
                <div class="well">
                    <table class ="table">
                        <thead>
                        <tr>
                            <th></th>
                            <th>Rater</th>
                            <th>Rating</th>
                            <th>Comment</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for index, item in ratings %}
                            <tr>
                                <td><a href="{{ path_for('getProfile', {email: item.email, remail: userEmail})}}" method="get">View user</a></td>
                                <td>{{ item.rater }}</td>
                                <td>{{ item.rating}}</td>
                                <td>{{ item.comment }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
        </div>
    </div>

{% endblock %}